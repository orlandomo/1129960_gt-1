<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../../WEB-INF/template/template_principal.xhtml"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:pt="http://java.sun.com/jsf/passthrough">

    <ui:define name="head2">
        <style>
            label{
                margin-top: 10px;
            }
            .radio-inline{
                padding-left: 0;
            }
            td,th{
                padding-left: 10px;
            }
            input[type=radio]{
                display: none;

            }
            input[type=radio] + label{
                cursor: pointer;
                padding: 10px;
                margin-left: 10px;
                border: 1px solid #337AB7;
                color: #337AB7;
                width: 100%;
                text-align: center;
            }           
            .cuadro:before{
                content: '';
                width: 100%;
                padding: 10px 70px;
                border: 1px solid #aaa;
                float: left;
            }
            input[type=radio]:checked + label{
                background: #337AB7;

                color: #fff;
                border: 1px solid #337AB7;
            } 
        </style>
        #{citasRequest.validarCita()}
        <link href="#{request.contextPath}/resources/css/Menu-borde.css" rel="stylesheet"/>
        <link href="#{request.contextPath}/resources/css/estilosFormularios.css" rel="stylesheet"/>
        <script src="#{request.contextPath}/resources/plugins/bootstrap-table/bootstrap-table.js" defer=""></script>
        <script src="#{request.contextPath}/resources/js/admin.js" defer=""></script>
        <script src="#{request.contextPath}/resources/js/Menu.js" defer=""></script>  

    </ui:define>


    <ui:define name="menu">
        <ui:include src="#{sesionGestec.dibujarMenu()}"/> 
    </ui:define>

    <ui:define name="titulo"> Citas</ui:define>
    <ui:define name="content">

        <h:form>
            <div class="row">
                <div class="col-md-5">
                    <label for="tipoServicio">Tipo</label>
                    <h:selectOneMenu id="tipoServicio"
                                     class="form-control"
                                     style="margin-top: 0"
                                     value="#{citasRequest.tipoServicio}">
                        <f:selectItem itemLabel="Instalación" itemValue="1"/>
                        <f:selectItem itemLabel="Mantenimiento" itemValue="2"/>
                        <f:selectItem itemLabel="Diagnóstico" itemValue="3"/>
                    </h:selectOneMenu>
                </div>
                <div class="col-md-5">
                    <label for="tipoEquipo">Equipo</label>
                    <h:selectOneMenu id="tipoEquipo"
                                     style="margin-top: 0"
                                     class="form-control"
                                     value="#{citasRequest.tipoEquipo}">
                        <f:selectItem itemLabel="Móvil" itemValue="1"/>
                        <f:selectItem itemLabel="Computador" itemValue="2"/>
                    </h:selectOneMenu>
                </div>
                <div class="col-md-2">
                    <label for="cantEquipos">Cant. equipos</label>
                    <h:inputText id="cantEquipos"
                                 class="form-control" 
                                 maxlength="4"
                                 required="true"
                                 requiredMessage="Mínimo 1 equipo"
                                 value="#{citasRequest.cantidadEquipos}"/>   
                    <h:message for="cantEquipos" style="color:red"  styleClass="error"></h:message>
                </div>
            </div>




            <label for="descripcion">Escriba una breve descripción de su problema</label>
            <h:inputText id="descripcion" 
                         class="form-control"
                         maxlength="300"
                         required="true"
                         requiredMessage="Escriba una descripción"
                         value="#{citasRequest.evento.descripcionEvento}"/>
            <h:message for="descripcion" style="color:red"  styleClass="error"></h:message>

            <div class="row">
                <div class="col-md-4">
                    <label for="fechaCita">¿Qué día desea el servicio?</label>
                    <h:inputText id="fechaCita"
                                 value="#{citasRequest.nuevaCita.fechaCita}" 
                                 class="form-control"         
                                 size="20" 
                                 required="true"
                                 label="Receipt Date"
                                 requiredMessage="Digite la fecha de la cita">

                        <f:convertDateTime pattern="yyyy-MM-dd hh:mm" />
                    </h:inputText>
                    <h:message for="fechaCita" style="color:red"  styleClass="error"></h:message>
                </div>
                <div class="col-md-4">
                    <label for="fechaInicio">Desde</label>
                    <h:inputText id="fechaInicio"
                                 value="#{citasRequest.horaDisponibilidad.horaInicio}" 
                                 class="form-control"         
                                 size="20" 
                                 required="true"
                                 label="Receipt Date"
                                 requiredMessage="Digite la fecha de inicio">

                        <f:convertDateTime pattern="yyyy-MM-dd hh:mm" />
                    </h:inputText>
                    <h:message for="fechaInicio" style="color:red"  styleClass="error"></h:message>
                    <h:messages globalOnly="true" showSummary="true" style="color: red;padding: 10px 0"/>
                </div>

                <div class="col-md-4">
                    <label for="fechafin">Hasta</label>
                    <h:inputText id="fechaFin"
                                 value="#{citasRequest.horaDisponibilidad.horaFin}" 
                                 class="form-control"
                                 size="20" 
                                 required="true"
                                 label="Receipt Date"
                                 requiredMessage="Digite la fecha de fin">

                        <f:convertDateTime pattern="yyyy-MM-dd hh:mm:ss" />
                    </h:inputText>
                    <h:message for="fechaFin" style="color:red"  styleClass="error"></h:message>

                </div>
            </div>
            
            

            <label class="col-md-12">¿A quién desea enviar la solicitud?</label>
            <h:selectOneRadio id="tecnicos" value="#{citasRequest.tecnicos}"
                              class="col-md-12"
                              styleClass ="radio-inline" enabledClass ="radio-inline">
                <f:selectItem itemLabel=" Técnicos disponibles" itemValue="1"/>
                <f:selectItem itemLabel=" Buscar técnico" itemValue="2"/>
                <f:selectItem itemLabel=" Último técnico" itemValue="3"/>
            </h:selectOneRadio>

            
            <div class="row">  
                <h:commandButton actionListener="#{citasRequest.ingresarCita()}" 
                                 class="btn btn-primary col-md-3 pull-right" value="Publicar cita"/>
            </div>
        </h:form>

    </ui:define>

    <ui:define name="bottom">

    </ui:define>
</ui:composition>



